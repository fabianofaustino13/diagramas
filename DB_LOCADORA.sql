CREATE DATABASE IF NOT EXISTS DB_LOCADORA;

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_SEXOS(
	PK_SEX TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    SEX_NOME VARCHAR(15) NOT NULL,
    SEX_SIGLA CHAR(3) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_SEX)
);

INSERT INTO TB_SEXOS
	(SEX_NOME, SEX_SIGLA) 
VALUES
	('MASCULINO','MASC'),
    ('FEMININO','FEM');
    
    
CREATE TABLE IF NOT EXISTS TB_CATEGORIAS(
	PK_CAT TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    CAT_NOME VARCHAR(25) NOT NULL,
    CAT_PRECO DECIMAL(5,2) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_CAT)
);

 -- MODIFICAR A ESTRUTURA
-- ALTER TABLE TB_CATEGORIAS
-- MODIFY CAT_PRECO DECIMAL(5,2) NOT NULL;

-- ALTER TABLE TB_CATEGORIAS
-- ADD COLUMN CAT_VALOR FLOAT NOT NULL DEFAULT 0.0;

-- ALTER TABLE TB_CATEGORIAS
-- ADD COLUMN CAT_SIGLA VARCHAR(5) NOT NULL DEFAULT 'TESTE';

-- ALTER TABLE TB_CATEGORIAS
-- DROP COLUMN CAT_VALOR;

ALTER TABLE TB_CATEGORIAS
MODIFY CAT_PRECO DECIMAL(5,2) NOT NULL;

INSERT INTO TB_CATEGORIAS
	(CAT_NOME, CAT_PRECO)
VALUES
	('CATALOGO', 1.50),
    ('LANÇAMENTO', 3.00),
    ('SUPER-LANÇAMENTO', 5.00);
    
CREATE TABLE IF NOT EXISTS TB_GENEROS(
	PK_GEN TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    GEN_NOME VARCHAR (25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_GEN)
);

INSERT INTO TB_GENEROS 
	(GEN_NOME) 
VALUES 
	('COMÉDIA'),
    ('TERROR'),
    ('DRAMA'),
    ('AÇÃO'),
    ('BIOGRAFIA'),
    ('FICÇÃO');

CREATE TABLE IF NOT EXISTS TB_CLASSIFICACOES(
	PK_CLA TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    CLA_NOME VARCHAR(25) NOT NULL,
    CLA_SIGLA VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_CLA)
);

INSERT INTO TB_CLASSIFICACOES 
	(CLA_NOME, CLA_SIGLA) 
VALUES 
	('LIVRE','L'),
    ('10 ANOS','10'),
    ('12 ANOS','12'),
    ('14 ANOS','14');

CREATE TABLE IF NOT EXISTS TB_ATORES(
	PK_ATO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    ATO_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_ATO)
);

INSERT INTO TB_ATORES 
	(ATO_NOME) 
VALUES 
	('MARINA RUI BARBOSA'),
    ('TOM CAVALCANTE');
    
CREATE TABLE IF NOT EXISTS TB_DIRETORES(
	PK_DIR INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    DIR_NOME VARCHAR (80) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_DIR)
);

INSERT INTO TB_DIRETORES 
	(DIR_NOME) 
VALUES 
	('MARIA CLARA FALCÃO FAUSTINO'),
    ('CARLA AGUIAR FALCÃO');

ALTER TABLE TB_DIRETORES 
MODIFY DIR_NOME VARCHAR (80) NOT NULL;

CREATE TABLE IF NOT EXISTS TB_FILMES(
	PK_FIL INT UNSIGNED NOT NULL AUTO_INCREMENT,
    FIL_TITULO VARCHAR(80) NOT NULL,
    FIL_SINOPSE TEXT,
    FIL_ANO_LANCAMENTO SMALLINT UNSIGNED,
    FIL_DURACAO SMALLINT UNSIGNED,
    FK_FIL_CLA TINYINT UNSIGNED NOT NULL,
    FK_FIL_CAT TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_FIL),
    CONSTRAINT FK_CLA_FIL FOREIGN KEY(FK_FIL_CLA) REFERENCES TB_CLASSIFICACOES(PK_CLA),
    CONSTRAINT FK_CAT_FIL FOREIGN KEY(FK_FIL_CAT) REFERENCES TB_CATEGORIAS(PK_CAT)
);

INSERT INTO TB_FILMES 	
	(FIL_TITULO, FIL_ANO_LANCAMENTO, FIL_DURACAO, FK_FIL_CLA, FK_FIL_CAT)
VALUES 
	('SENHOR DOS ANÉIS - AS DUAS TORRES', 2001, 179, 3, 1),
    ('SENHOR DOS ANÉIS - SOCIEDADE DO ANEL', 2002, 178, 3, 1),
    ('SENHOR DOS ANÉIS - O RETORNO DO REI', 2003, 201, 3, 1),
    ('MISSÃO: IMPOSSÍVEL', 1996, 110, 4, 1),
    ('MISSÃO: IMPOSSÍVEL 2', 2000, 123, 4, 1),
    ('MISSÃO: IMPOSSÍVEL 3', 2006, 126, 4, 1),
    ('MISSÃO: IMPOSSÍVEL - PROTOCOLO FANTASMA', 2011, 133, 4, 1),
    ('MISSÃO: IMPOSSÍVEL - NAÇÃO SECRETA', 2015, 131, 4, 2),
    ('MISSÃO: IMPOSSÍVEL - EFEITO FALLOUT', 2018, 147, 4, 3);

CREATE TABLE IF NOT EXISTS TB_STATUS(
	PK_STA TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    STA_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_STA)
);

INSERT INTO TB_STATUS 
	(STA_NOME) 
VALUES 
	('OCUPADO'),
    ('DISPONÍVEL');

CREATE TABLE IF NOT EXISTS TB_MIDIAS(
	PK_MID TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    MID_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_MID)
);

INSERT INTO TB_MIDIAS 
	(MID_NOME) 
VALUES 
	('VHS'),
    ('DVD'),
    ('BLUE RAY');

CREATE TABLE IF NOT EXISTS TB_GENEROS_FILMES(
	FK_GDF_FIL INT UNSIGNED NOT NULL,
    FK_GDF_GEN TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY (FK_GDF_FIL, FK_GDF_GEN),
    CONSTRAINT FK_FIL_GDF FOREIGN KEY(FK_GDF_FIL) REFERENCES TB_FILMES(PK_FIL),
    CONSTRAINT FK_GEN_GDF FOREIGN KEY(FK_GDF_GEN) REFERENCES TB_GENEROS(PK_GEN)
);

INSERT INTO TB_GENEROS_FILMES 
	(FK_GDF_FIL, FK_GDF_GEN) 
VALUES 
	(1,1), (1,3),
    (2,6),
    (3,5),(3,6);

CREATE TABLE IF NOT EXISTS TB_IDIOMAS(
	PK_IDI SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    IDI_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_IDI)
);

INSERT INTO TB_IDIOMAS 
	(IDI_NOME)
VALUES 
	('PORTUGUÊS'),
    ('ESPANHOL'),
    ('INGLÊS'),
    ('FRANCÊS');
    
CREATE TABLE IF NOT EXISTS TB_LEGENDAS(
	PK_LEG SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    LEG_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_LEG)
);

INSERT INTO TB_LEGENDAS 
	(LEG_NOME)
VALUES 
	('PORTUGUÊS'),
    ('ESPANHOL'),
    ('INGLÊS'),
    ('FRANCÊS');
    
CREATE TABLE IF NOT EXISTS TB_AUDIOS(
	PK_AUD SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    AUD_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_AUD)
);

INSERT INTO TB_AUDIOS 
	(AUD_NOME)
VALUES
	('PORTUGUÊS'),
    ('ESPANHOL'),
    ('INGLÊS'),
    ('FRANCÊS');
    
CREATE TABLE IF NOT EXISTS TB_PAISES(
	PK_PAI SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    PAI_SIGLA VARCHAR(3) NOT NULL,
    PAI_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY (PK_PAI)
);

-- ALTER TABLE TB_PAISES
-- ADD COLUMN PAI_SIGLA VARCHAR(3) NOT NULL;

INSERT INTO TB_PAISES
	(PAI_SIGLA, PAI_NOME)
VALUES
	('BRA', 'BRASIL'),
    ('ESP', 'ESPANHA'),
    ('EUA', 'ESTADOS UNIDOS DA AMÉRICA'),
    ('FRA', 'FRANÇA');

INSERT INTO TB_PAISES
	(PAI_NOME)
VALUES
	('BRASIL'),
    ('ESPANHA'),
    ('EUA'),
    ('FRANÇA');

CREATE TABLE IF NOT EXISTS TB_PAISES_FILMES(
	FK_PDF_FIL INT UNSIGNED NOT NULL,
    FK_PDF_PAI SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY (FK_PDF_FIL, FK_PDF_PAI),
    CONSTRAINT FK_FIL_PDF FOREIGN KEY(FK_PDF_FIL) REFERENCES TB_FILMES(PK_FIL),
    CONSTRAINT FK_PAI_PDF FOREIGN KEY(FK_PDF_PAI) REFERENCES TB_PAISES(PK_PAI)
);

INSERT INTO TB_PAISES_FILMES 
	(FK_PDF_FIL, FK_PDF_PAI) 
VALUES 
	(1,3),
    (2,3),
    (3,1),
    (4,2),
    (5,4),
    (6,2),
    (7,1),
    (8,4),
    (9,3);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_DIRETORES_FILMES(
	FK_DDF_DIR INT UNSIGNED NOT NULL,
    FK_DDF_FIL INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_DDF_DIR, FK_DDF_FIL),
    CONSTRAINT FK_DIR_DDF FOREIGN KEY(FK_DDF_DIR) REFERENCES TB_DIRETORES(PK_DIR),
    CONSTRAINT FK_FIL_DDF FOREIGN KEY(FK_DDF_FIL) REFERENCES TB_FILMES(PK_FIL)
);

INSERT INTO TB_DIRETORES_FILMES 
	(FK_DDF_DIR, FK_DDF_FIL) 
VALUES 
	(1,1), (1,2), (1,4), (1,5), (1,8),
	(2,2), (2,3), (2,6), (2,7), (2,9);
     
USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_ATORES_FILMES(
	FK_ADF_FIL INT UNSIGNED NOT NULL,
    FK_ADF_ATO INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_ADF_FIL, FK_ADF_ATO),
    CONSTRAINT FK_FIL_ADF FOREIGN KEY(FK_ADF_FIL) REFERENCES TB_FILMES(PK_FIL),
    CONSTRAINT FK_ATO_ADF FOREIGN KEY(FK_ADF_ATO) REFERENCES TB_ATORES(PK_ATO)
);

INSERT INTO TB_ATORES_FILMES 
	(FK_ADF_FIL, FK_ADF_ATO) 
VALUES 
	(1,1), (2,1), (3,1), (4,1), (5,1),
	(5,2), (6,2), (7,2), (8,2), (9,2);

CREATE TABLE IF NOT EXISTS TB_COPIAS(
	PK_COP INT UNSIGNED NOT NULL AUTO_INCREMENT,
    FK_COP_FIL INT UNSIGNED NOT NULL,
    FK_COP_MID TINYINT UNSIGNED NOT NULL,
    FK_COP_STA TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_COP),
    CONSTRAINT FK_FIL_COP FOREIGN KEY(FK_COP_FIL) REFERENCES TB_FILMES(PK_FIL),
    CONSTRAINT FK_MID_COP FOREIGN KEY(FK_COP_MID) REFERENCES TB_MIDIAS(PK_MID),
    CONSTRAINT FK_STA_COP FOREIGN KEY(FK_COP_STA) REFERENCES TB_STATUS(PK_STA)
    
);

INSERT INTO TB_COPIAS 
	(FK_COP_FIL, FK_COP_MID, FK_COP_STA) 
VALUES 
	(1,1,2), (1,2,2),
	(2,1,2), (2,2,2),
    (3,1,2), (3,2,2),
    (4,1,2), (4,2,2),
    (5,1,2), (5,2,2),
    (6,1,2), (6,2,2),
    (7,2,1), (7,3,2),
    (8,2,1), (8,3,2),
    (9,2,1), (9,3,1);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_LEGENDAS_COPIAS(
	FK_LDC_IDI SMALLINT UNSIGNED NOT NULL,
    FK_LDC_LEG SMALLINT UNSIGNED NOT NULL,
    FK_LDC_COP INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY (FK_LDC_IDI, FK_LDC_LEG, FK_LDC_COP),
	CONSTRAINT FK_IDI_LDC FOREIGN KEY(FK_LDC_IDI) REFERENCES TB_IDIOMAS(PK_IDI),
	CONSTRAINT FK_LEG_LDC FOREIGN KEY(FK_LDC_LEG) REFERENCES TB_LEGENDAS(PK_LEG),
	CONSTRAINT FK_COP_LDC FOREIGN KEY(FK_LDC_COP) REFERENCES TB_COPIAS(PK_COP)
);

INSERT INTO TB_LEGENDAS_COPIAS 
	(FK_LDC_COP, FK_LDC_IDI, FK_LDC_LEG) 
VALUES 
	(1,1,1), (1,1,2), (1,1,3), (1,1,4), (1,2,1), (1,2,2), (1,2,3), (1,2,4), (1,3,1), (1,3,2), (1,3,3), (1,3,4), (1,4,1), (1,4,2), (1,4,3), (1,4,4),
	(2,1,1), (2,1,2), (2,1,3), (2,1,4), (2,2,1), (2,2,2), (2,2,3), (2,2,4), (2,3,1), (2,3,2), (2,3,3), (2,3,4), (2,4,1), (2,4,2), (2,4,3), (2,4,4),
    (3,1,1), (3,1,2), (3,1,3), (3,1,4), (3,2,1), (3,2,2), (3,2,3), (3,2,4), (3,3,1), (3,3,2), (3,3,3), (3,3,4), (3,4,1), (3,4,2), (3,4,3), (3,4,4),
    (4,1,1), (4,1,2), (4,1,3), (4,1,4), (4,2,1), (4,2,2), (4,2,3), (4,2,4), (4,3,1), (4,3,2), (4,3,3), (4,3,4), (4,4,1), (4,4,2), (4,4,3), (4,4,4),
    (5,1,1), (5,1,2), (5,1,3), (5,1,4), (5,2,1), (5,2,2), (5,2,3), (5,2,4), (5,3,1), (5,3,2), (5,3,3), (5,3,4), (5,4,1), (5,4,2), (5,4,3), (5,4,4),
    (6,1,1), (6,1,2), (6,1,3), (6,1,4), (6,2,1), (6,2,2), (6,2,3), (6,2,4), (6,3,1), (6,3,2), (6,3,3), (6,3,4), (6,4,1), (6,4,2), (6,4,3), (6,4,4),
	(7,1,1), (7,1,2), (7,1,3), (7,1,4), (7,2,1), (7,2,2), (7,2,3), (7,2,4), (7,3,1), (7,3,2), (7,3,3), (7,3,4), (7,4,1), (7,4,2), (7,4,3), (7,4,4),
    (8,1,1), (8,1,2), (8,1,3), (8,1,4), (8,2,1), (8,2,2), (8,2,3), (8,2,4), (8,3,1), (8,3,2), (8,3,3), (8,3,4), (8,4,1), (8,4,2), (8,4,3), (8,4,4),
    (9,1,1), (9,1,2), (9,1,3), (9,1,4), (9,2,1), (9,2,2), (9,2,3), (9,2,4), (9,3,1), (9,3,2), (9,3,3), (9,3,4), (9,4,1), (9,4,2), (9,4,3), (9,4,4);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_AUDIOS_COPIAS(
	FK_ADC_IDI SMALLINT UNSIGNED NOT NULL,
    FK_ADC_COP INT UNSIGNED NOT NULL,
    FK_ADC_AUD SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY (FK_ADC_IDI, FK_ADC_COP, FK_ADC_AUD),
	CONSTRAINT FK_IDI_ADC FOREIGN KEY(FK_ADC_IDI) REFERENCES TB_IDIOMAS(PK_IDI),
	CONSTRAINT FK_AUD_ADC FOREIGN KEY(FK_ADC_AUD) REFERENCES TB_AUDIOS(PK_AUD),
	CONSTRAINT FK_COP_ADC FOREIGN KEY(FK_ADC_COP) REFERENCES TB_COPIAS(PK_COP)
);

INSERT INTO TB_AUDIOS_COPIAS 
	(FK_ADC_COP, FK_ADC_IDI, FK_ADC_AUD) 
VALUES 
	(1,1,1), (1,1,2), (1,1,3), (1,1,4), (1,2,1), (1,2,2), (1,2,3), (1,2,4), (1,3,1), (1,3,2), (1,3,3), (1,3,4), (1,4,1), (1,4,2), (1,4,3), (1,4,4),
	(2,1,1), (2,1,2), (2,1,3), (2,1,4), (2,2,1), (2,2,2), (2,2,3), (2,2,4), (2,3,1), (2,3,2), (2,3,3), (2,3,4), (2,4,1), (2,4,2), (2,4,3), (2,4,4),
    (3,1,1), (3,1,2), (3,1,3), (3,1,4), (3,2,1), (3,2,2), (3,2,3), (3,2,4), (3,3,1), (3,3,2), (3,3,3), (3,3,4), (3,4,1), (3,4,2), (3,4,3), (3,4,4),
    (4,1,1), (4,1,2), (4,1,3), (4,1,4), (4,2,1), (4,2,2), (4,2,3), (4,2,4), (4,3,1), (4,3,2), (4,3,3), (4,3,4), (4,4,1), (4,4,2), (4,4,3), (4,4,4),
    (5,1,1), (5,1,2), (5,1,3), (5,1,4), (5,2,1), (5,2,2), (5,2,3), (5,2,4), (5,3,1), (5,3,2), (5,3,3), (5,3,4), (5,4,1), (5,4,2), (5,4,3), (5,4,4),
    (6,1,1), (6,1,2), (6,1,3), (6,1,4), (6,2,1), (6,2,2), (6,2,3), (6,2,4), (6,3,1), (6,3,2), (6,3,3), (6,3,4), (6,4,1), (6,4,2), (6,4,3), (6,4,4),
	(7,1,1), (7,1,2), (7,1,3), (7,1,4), (7,2,1), (7,2,2), (7,2,3), (7,2,4), (7,3,1), (7,3,2), (7,3,3), (7,3,4), (7,4,1), (7,4,2), (7,4,3), (7,4,4),
    (8,1,1), (8,1,2), (8,1,3), (8,1,4), (8,2,1), (8,2,2), (8,2,3), (8,2,4), (8,3,1), (8,3,2), (8,3,3), (8,3,4), (8,4,1), (8,4,2), (8,4,3), (8,4,4),
    (9,1,1), (9,1,2), (9,1,3), (9,1,4), (9,2,1), (9,2,2), (9,2,3), (9,2,4), (9,3,1), (9,3,2), (9,3,3), (9,3,4), (9,4,1), (9,4,2), (9,4,3), (9,4,4);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_OBSERVACOES_COPIAS(
	FK_ODC_COP INT UNSIGNED NOT NULL,
    ODC_OBSERVACAO TEXT,
    CONSTRAINT PRIMARY KEY (FK_ODC_COP),
	CONSTRAINT FK_COP_ODC FOREIGN KEY(FK_ODC_COP) REFERENCES TB_COPIAS(PK_COP)
);

INSERT INTO TB_OBSERVACOES_COPIAS 
	(FK_ODC_COP, ODC_OBSERVACAO) 
VALUES 
	(1,'EM PERFEITO ESTADO'),
	(2,'EM PERFEITO ESTADO'),
    (3,'FILME TRAVANDO EM ALGUMAS PARTES'),
    (4,'TRAVOU NO FINAL'),
    (5,'EM PERFEITO ESTADO'),
    (6,'EM PERFEITO ESTADO'),
	(7,'EM PERFEITO ESTADO'),
    (8,'EM ÓTIMO ESTADO'),
    (9,'EM ÓTIMO ESTADO');
    
USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_ATENDENTES(
	PK_MAT VARCHAR(10) NOT NULL,
    ATE_NOME VARCHAR(80) NOT NULL,
    ATE_DATA_ADMISSAO DATE NOT NULL,
    ATE_DATA_DEMISSAO DATE,
    FK_ATE_SEX TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_MAT),
    CONSTRAINT FK_SEX_ATE FOREIGN KEY(FK_ATE_SEX) REFERENCES TB_SEXOS(PK_SEX)
);

INSERT INTO TB_ATENDENTES 
	(PK_MAT, ATE_NOME, ATE_DATA_ADMISSAO, FK_ATE_SEX) 
VALUES 
	(11111, 'João Figueira', 20160102, 1),
    (22222, 'Pedro Mendes', 20171202, 1),
    (33333, 'Viviane Limeira',20140102, 2);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_FONE_ATENDENTES(
	FK_FDA_ATE VARCHAR(10) NOT NULL,
    FDA_FONE VARCHAR(12) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FDA_ATE, FDA_FONE),
    CONSTRAINT FK_ATE_FDA FOREIGN KEY(FK_FDA_ATE) REFERENCES TB_ATENDENTES(PK_MAT)
);

INSERT INTO TB_FONE_ATENDENTES 
	(FK_FDA_ATE, FDA_FONE) 
VALUES 
	(11111, 08411111111), (11111, 08499999999),
    (22222, 08422222222), (22222, 08488888888),
    (33333, 08477777777);
    
USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_ESTADOS(
	PK_EST TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    EST_NOME VARCHAR(25) NOT NULL,
    EST_SIGLA VARCHAR(2) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_EST)
);

INSERT INTO TB_ESTADOS 
	(EST_NOME, EST_SIGLA) 
VALUES 
	('ACRE', 'AC'),
	('ALAGOAS', 'AL'),
	('AMAPÁ', 'AP'),
	('AMAZONAS', 'AM'),
	('BAHIA', 'BA'),
	('CEARÁ', 'CE'),
	('DISTRITO FEDERAL', 'DF'),
	('ESPÍRITO SANTO', 'ES'),
	('GOIÁS', 'GO'),
	('MARANHÃO', 'MA'),
	('MATO GROSSO', 'MT'),
	('MATO GROSSO DO SUL', 'MS'),
	('MINAS GERAIS', 'MG'),
	('PARÁ', 'PA'),
	('PARAÍBA', 'PB'),
	('PARANÁ', 'PR'),
	('PERNAMBUCO', 'PE'),
	('PIAUÍ', 'PI'),
	('RIO DE JANEIRO', 'RJ'),
	('RIO GRANDE DO NORTE', 'RN'),
	('RIO GRANDE DO SUL', 'RS'),
	('RONDÔNIA', 'RO'),
	('RORAIMA', 'RR'),
	('SANTA CATARINA', 'SC'),
	('SÃO PAULO', 'SP'),
	('SERGIPE', 'SE') ,
	('TOCANTINS', 'TO');

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_CIDADES(
	PK_CIDADE SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    CID_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_CIDADE)
);

INSERT INTO TB_CIDADES 
	(CID_NOME) 
VALUES 
	('NATAL'),
    ('SANTANA DO ARAGUAIA'),
    ('PALMAS'),
    ('FORTALEZA'),
    ('MOSSORÓ'),
    ('SANTA CRUZ'),
    ('SÃO TOMÉ'),
    ('GOIÂNIA');

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_BAIRROS(
	PK_BAIRRO SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    BAI_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_BAIRRO)
);

INSERT INTO TB_BAIRROS 
	(BAI_NOME) 
VALUES 
	('LAGOA NOVA'),
    ('PETROPOLIS'),
    ('CANDELÁRIA'),
    ('PONTA NEGRA'),
    ('CIDADE ALTA'),
    ('CENTRO'),
    ('TIROL'),
    ('ALECRIM');

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_CLIENTES(
	PK_CLIENTE INT UNSIGNED NOT NULL AUTO_INCREMENT,
    CLI_NOME VARCHAR(80) NOT NULL,
    CLI_DATA_NASCIMENTO DATE,
    CLI_LOGRADOURO VARCHAR(80),
    CLI_CEP VARCHAR(8),
    CLI_COMPLEMENTO VARCHAR(25),
    CLI_NUMERO SMALLINT UNSIGNED,
    CLI_CPF VARCHAR(11) NOT NULL,
    CLI_RG VARCHAR(15),
    FK_CLI_SEX TINYINT UNSIGNED NOT NULL,
    FK_CLI_BAI SMALLINT UNSIGNED NOT NULL,
    FK_CLI_CID SMALLINT UNSIGNED NOT NULL,
    FK_CLI_EST TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_CLIENTE),
    CONSTRAINT UNIQUE KEY (CLI_CPF),
    CONSTRAINT FK_SEX_CLI FOREIGN KEY(FK_CLI_SEX) REFERENCES TB_SEXOS(PK_SEX),
    CONSTRAINT FK_BAI_CLI FOREIGN KEY(FK_CLI_BAI) REFERENCES TB_BAIRROS(PK_BAIRRO),
    CONSTRAINT FK_CID_CLI FOREIGN KEY(FK_CLI_CID) REFERENCES TB_CIDADES(PK_CIDADE),
    CONSTRAINT FK_EST_CLI FOREIGN KEY(FK_CLI_EST) REFERENCES TB_ESTADOS(PK_EST)
);

-- ALTER TABLE TB_CLIENTES
-- ADD CONSTRAINT UNIQUE KEY (CLI_CPF);

INSERT INTO TB_CLIENTES 
	(CLI_NOME, CLI_CPF, FK_CLI_SEX, FK_CLI_BAI, FK_CLI_CID, FK_CLI_EST) 
VALUES 
-- ('MARIA CLARA FALCÃO FAUSTINO', 123456789011, 2, 1, 1, 20),
    ('CARLA AGUIAR FALCÃO', 93120567353, 2, 1, 1, 20),
    ('FABIANO FAUSTINO DE OLIVEIRA', 69628459287, 1, 1, 1, 20),
    ('LUZINEIDA FAUSTINO DE OLIVEIRA', 11111111111, 2, 6, 2, 14),
    ('JOSÉ FAUSTINO OLIVEIRA', 22222222222, 1, 6, 2, 14),
--  ('LUCIANO FAUSTINO DE OLIVEIRA', 33333333333, 1, 6, 2, 14),
    ('MARIA DA CONCEIÇÃO AGUIAR', 44444444444, 2, 1, 1, 20);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_FONE_CLIENTES(
	FK_FDC_CLI INT UNSIGNED NOT NULL,
    FDC_FONE VARCHAR(12) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FDC_CLI, FDC_FONE),
    CONSTRAINT FK_CLI_FDC FOREIGN KEY(FK_FDC_CLI) REFERENCES TB_CLIENTES(PK_CLIENTE)
);

INSERT INTO TB_FONE_CLIENTES 
	(FK_FDC_CLI, FDC_FONE) 
VALUES 
	(1, 84999215689), (1, 84991143397),
    (2, 84991143397),
    (3, 9434313434), (3, 94991878569),
    (4, 9434311698), (4, 94991865941),
    (5, 85999553635);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_EMAILS_CLIENTES(
	FK_EDC_CLI INT UNSIGNED NOT NULL,
    EDC_EMAIL VARCHAR(80) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_EDC_CLI, EDC_EMAIL),
    CONSTRAINT FK_CLI_EDC FOREIGN KEY(FK_EDC_CLI) REFERENCES TB_CLIENTES(PK_CLIENTE)
);

INSERT INTO TB_EMAILS_CLIENTES 
	(FK_EDC_CLI, EDC_EMAIL) 
VALUES 
	(1, 'carla.falcao@gmail.com'),
    (2, 'ffo13@hotmail.com'),
    (3, 'neida.faustino@hotmail.com'),
    (4, 'jose.faustino@gmail.com'),
    (5, 'concita.aguiar@bol.com.br');

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_GRAU_PARENTESCOS(
	PK_GRAU_PARENTESCO TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    GDP_NOME VARCHAR(80) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_GRAU_PARENTESCO)
);

INSERT INTO TB_GRAU_PARENTESCOS 
	(GDP_NOME) 
VALUES 
	('PAI'),
    ('MÃE'),
    ('FILHOS'),
    ('IRMÃO'),
    ('AVÓS'),
    ('NETOS'),
    ('TIOS'),
    ('SOBRINHOS'),
    ('BISAVÓS'),
    ('BISNETOS'),
    ('PRIMOS'),
    ('SOGRO'),
    ('SOGRA'),
    ('GENRO'),
    ('NORA'),
    ('PADRASTO'),
    ('MADRASTA'),
    ('ENTEADOS'),
    ('CUNHADOS');

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_DEPENDENTES(
	PK_DEPENDENTE SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    DEP_NOME VARCHAR(80) NOT NULL,
    DEP_DATA_NASCIMENTO DATE, 
    FK_DEP_GDP TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_DEPENDENTE),
    CONSTRAINT FK_GDP_DEP FOREIGN KEY(FK_DEP_GDP) REFERENCES TB_GRAU_PARENTESCOS(PK_GRAU_PARENTESCO)
);

INSERT INTO TB_DEPENDENTES 
	(FK_DEP_GDP, DEP_NOME) 
VALUES 
	(3, 'MARIA CLARA FALCÃO FAUSTINO'),
    (4, 'LUCIANO FAUSTINO DE OLIVEIRA');
    
USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_DEPENDENTES_CLIENTES(
	FK_DDC_CLI INT UNSIGNED NOT NULL,
    FK_DDC_DEP SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_DDC_CLI, FK_DDC_DEP),
    CONSTRAINT FK_CLI_DDC FOREIGN KEY(FK_DDC_CLI) REFERENCES TB_CLIENTES(PK_CLIENTE),
    CONSTRAINT FK_DEP_DDC FOREIGN KEY(FK_DDC_DEP) REFERENCES TB_DEPENDENTES(PK_DEPENDENTE)
);

INSERT INTO TB_DEPENDENTES_CLIENTES 
	(FK_DDC_CLI, FK_DDC_DEP) 
VALUES 
	(1,1), 
    (2,1),
	(3,2),
    (4,2);


USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_FONE_DEPENDENTES(
	FK_FDD_DEP SMALLINT UNSIGNED NOT NULL,
    DEP_FONE VARCHAR(12) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FDD_DEP, DEP_FONE),
    CONSTRAINT FK_DEP_FDD FOREIGN KEY(FK_FDD_DEP) REFERENCES TB_DEPENDENTES(PK_DEPENDENTE)
);

INSERT INTO TB_FONE_DEPENDENTES 
	(FK_FDD_DEP, DEP_FONE) 
VALUES 
	(1, 84999215689), (1, 84991143397),
    (2, 9434313434), (2, 94991878569);
    
USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_LOCACOES(
	PK_LOCACAO INT UNSIGNED NOT NULL AUTO_INCREMENT,
    LOC_DATA_LOCACAO DATE NOT NULL,
    LOC_DATA_DEVOLUCAO DATE,
    LOC_VALOR_LOCACAO DECIMAL(6,2),
    FK_LOC_CLI INT UNSIGNED NOT NULL,
    FK_LOC_DEP SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_LOCACAO),
    CONSTRAINT FK_CLI_LOC FOREIGN KEY(FK_LOC_CLI) REFERENCES TB_CLIENTES(PK_CLIENTE),
    CONSTRAINT FK_DEP_LOC FOREIGN KEY(FK_LOC_DEP) REFERENCES TB_DEPENDENTES(PK_DEPENDENTE)
);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_LOCACOES_ATENDENTES(
	FK_LDA_LOC INT UNSIGNED NOT NULL,
    FK_LDA_ATE VARCHAR(10) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_LDA_LOC,FK_LDA_ATE),
    CONSTRAINT FK_LOC_LDA FOREIGN KEY(FK_LDA_LOC) REFERENCES TB_LOCACOES(PK_LOCACAO),
    CONSTRAINT FK_ATE_LDA FOREIGN KEY(FK_LDA_ATE) REFERENCES TB_ATENDENTES(PK_MAT)
);

USE DB_LOCADORA;

CREATE TABLE IF NOT EXISTS TB_ITENS_LOCACOES(
	FK_IDL_LOC INT UNSIGNED NOT NULL,
    FK_IDL_COP INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_IDL_LOC,FK_IDL_COP),
    CONSTRAINT FK_LOC_IDL FOREIGN KEY(FK_IDL_LOC) REFERENCES TB_LOCACOES(PK_LOCACAO),
    CONSTRAINT FK_COP_IDL FOREIGN KEY(FK_IDL_COP) REFERENCES TB_COPIAS(PK_COP)
);


-- USE DB_LOCADORA;

/*
SELECT * FROM TB_FILMES
WHERE FK_FIL_CLA = (SELECT PK_CLA FROM TB_CLASSIFICACOES WHERE CLA_SIGLA = '12');
*/

-- DELETE FROM TB_FILMES WHERE PK_FIL = 2;

/*
UPDATE TB_FILMES SET
FIL_SINOPSE = 'ISTO É UMA SINOPSE', FIL_ANO_LANCAMENTO = 2008 
WHERE PK_FIL = 2;
*/
