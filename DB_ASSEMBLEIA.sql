CREATE DATABASE IF NOT EXISTS DB_ASSEMBLEIA;

USE DB_ASSEMBLEIA;

CREATE TABLE IF NOT EXISTS TB_BLOCOS(
	PK_BLO TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    BLO_TORRE VARCHAR(10),
    BLO_NOME VARCHAR(10) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_BLO)
);

INSERT INTO TB_BLOCOS 
	(BLO_TORRE, BLO_NOME)
VALUES 
	('TORRE 1', 'NICE'),
    ('TORRE 2', 'LYON');
    
USE DB_ASSEMBLEIA;

CREATE TABLE IF NOT EXISTS TB_APARTAMENTOS(
	PK_APA SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    APA_NOME VARCHAR(5) NOT NULL,
    FK_APA_BLO TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_APA),
    CONSTRAINT FK_BLO_APA FOREIGN KEY(FK_APA_BLO) REFERENCES TB_BLOCOS(PK_BLO)
);

INSERT INTO TB_APARTAMENTOS 
	(FK_APA_BLO, APA_NOME) 
VALUES 
	(1, 001), (1, 002), (1, 003),
    (1, 101), (1, 102), (1, 103), (1, 104), (1, 105), (1, 106),
    (1, 201), (1, 202), (1, 203), (1, 204), (1, 205), (1, 206),
    (1, 301), (1, 302), (1, 303), (1, 304), (1, 305), (1, 306),
    (1, 401), (1, 402), (1, 403), (1, 404), (1, 405), (1, 406),
    (1, 501), (1, 502), (1, 503), (1, 504), (1, 505), (1, 506),
    (1, 601), (1, 602), (1, 603), (1, 604), (1, 605), (1, 606),
    (1, 701), (1, 702), (1, 703), (1, 704), (1, 705), (1, 706),
    (1, 801), (1, 802), (1, 803), (1, 804), (1, 805), (1, 806),
    (1, 901), (1, 902), (1, 903), (1, 904), (1, 905), (1, 906),
    (2, 001), (2, 002), (2, 003),
    (2, 101), (2, 102), (2, 103), (2, 104), (2, 105), (2, 106),
    (2, 201), (2, 202), (2, 203), (2, 204), (2, 205), (2, 206),
    (2, 301), (2, 302), (2, 303), (2, 304), (2, 305), (2, 306),
    (2, 401), (2, 402), (2, 403), (2, 404), (2, 405), (2, 406),
    (2, 501), (2, 502), (2, 503), (2, 504), (2, 505), (2, 506),
    (2, 601), (2, 602), (2, 603), (2, 604), (2, 605), (2, 606),
    (2, 701), (2, 702), (2, 703), (2, 704), (2, 705), (2, 706),
    (2, 801), (2, 802), (2, 803), (2, 804), (2, 805), (2, 806),
    (2, 901), (2, 902), (2, 903), (2, 904), (2, 905), (2, 906);
    
USE DB_ASSEMBLEIA;

CREATE TABLE IF NOT EXISTS TB_ADIMPLENCIA(
	PK_ADI TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    ADI_SITUACAO VARCHAR(15) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_ADI)
);

INSERT INTO TB_ADIMPLENCIA 
	(ADI_SITUACAO)
VALUES
	('LIBERADO'),
    ('BLOQUEADO');

USE DB_ASSEMBLEIA;

CREATE TABLE IF NOT EXISTS TB_APARTAMENTOS_ADIMPLENTES(
	FK_ADA_APA SMALLINT UNSIGNED NOT NULL,
    FK_ADA_ADI TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_ADA_APA, FK_ADA_ADI),
    CONSTRAINT FK_APA_ADA FOREIGN KEY(FK_ADA_APA) REFERENCES TB_APARTAMENTOS(PK_APA),
    CONSTRAINT FK_ADI_ADA FOREIGN KEY (FK_ADA_ADI) REFERENCES TB_ADIMPLENCIA(PK_ADI)
);

INSERT INTO TB_APARTAMENTOS_ADIMPLENTES 
	(FK_ADA_APA, FK_ADA_ADI) 
VALUES 
	(1,1),
    (2,1),
    (3,2),
    (4,1),
    (5,2),
    (6,2),
    (7,1),
    (8,1),
    (9,1),
    (10,1);
    

