CREATE DATABASE IF NOT EXISTS DB_LOJA;

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_SEXOS(
	PK_SEX TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    SEX_NOME VARCHAR(15) NOT NULL,
    SEX_SIGLA CHAR(3) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_SEX)
);

INSERT INTO TB_SEXOS
	(SEX_NOME, SEX_SIGLA) 
VALUES
	('MASCULINO','MASC'),
    ('FEMININO','FEM');

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_ESTADOS(
	PK_EST TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    EST_NOME VARCHAR(25) NOT NULL,
    EST_SIGLA VARCHAR(2) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_EST)
);

INSERT INTO TB_ESTADOS 
	(EST_NOME, EST_SIGLA) 
VALUES 
	('ACRE', 'AC'),
	('ALAGOAS', 'AL'),
	('AMAPÁ', 'AP'),
	('AMAZONAS', 'AM'),
	('BAHIA', 'BA'),
	('CEARÁ', 'CE'),
	('DISTRITO FEDERAL', 'DF'),
	('ESPÍRITO SANTO', 'ES'),
	('GOIÁS', 'GO'),
	('MARANHÃO', 'MA'),
	('MATO GROSSO', 'MT'),
	('MATO GROSSO DO SUL', 'MS'),
	('MINAS GERAIS', 'MG'),
	('PARÁ', 'PA'),
	('PARAÍBA', 'PB'),
	('PARANÁ', 'PR'),
	('PERNAMBUCO', 'PE'),
	('PIAUÍ', 'PI'),
	('RIO DE JANEIRO', 'RJ'),
	('RIO GRANDE DO NORTE', 'RN'),
	('RIO GRANDE DO SUL', 'RS'),
	('RONDÔNIA', 'RO'),
	('RORAIMA', 'RR'),
	('SANTA CATARINA', 'SC'),
	('SÃO PAULO', 'SP'),
	('SERGIPE', 'SE') ,
	('TOCANTINS', 'TO');
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_CIDADES(
	PK_CID SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    CID_NOME VARCHAR(25) NOT NULL,
    FK_EST_CID TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_CID),
    CONSTRAINT FK_CID_EST FOREIGN KEY(FK_EST_CID) REFERENCES TB_ESTADOS(PK_EST)
);

INSERT INTO TB_CIDADES 
	(CID_NOME, FK_EST_CID) 
VALUES 
	('NATAL', 20),
    ('SANTANA DO ARAGUAIA', 14),
    ('PALMAS', 27),
    ('FORTALEZA', 6),
    ('MOSSORÓ', 20),
    ('SANTA CRUZ', 20),
    ('SÃO TOMÉ', 20),
    ('GOIÂNIA', 9);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_BAIRROS(
	PK_BAI SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    BAI_NOME VARCHAR(25) NOT NULL,
    FK_BAI_CID SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_BAI),
    CONSTRAINT FK_CID_BAI FOREIGN KEY(FK_BAI_CID) REFERENCES TB_CIDADES(PK_CID)
);

INSERT INTO TB_BAIRROS 
	(BAI_NOME, FK_BAI_CID) 
VALUES 
	('LAGOA NOVA', 1),
    ('PETROPOLIS', 1),
    ('CANDELÁRIA', 1),
    ('PONTA NEGRA', 1),
    ('CIDADE ALTA', 1),
    ('CENTRO', 2),
    ('TIROL', 1),
    ('ALECRIM', 1);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_CEPS(
	PK_CEP VARCHAR(8) NOT NULL,
    CEP_LOGRADOURO VARCHAR(100),
    FK_BAI_CEP SMALLINT UNSIGNED,
    CONSTRAINT PRIMARY KEY(PK_CEP),
    CONSTRAINT FK_CEP_BAI FOREIGN KEY(FK_BAI_CEP) REFERENCES TB_BAIRROS(PK_BAI)
);

INSERT INTO TB_CEPS 
	(PK_CEP, CEP_LOGRADOURO, FK_BAI_CEP) 
VALUES 
	('59075770', 'RUA MORAIS NAVARRO', 1),
    ('59075020', 'RUA MAJOR AFONSO MAGALHÃES', 2),
    ('59075030', 'RUA PEDRO MIRANDA', 3),
    ('59075040', 'AV. ENGENHEIRO ROBERTO FREIRE', 4),
    ('59075050', 'RUA PRINCESA ISABEL', 5),
    ('68560000', 'RUA CARLOS RIBEIRO', 6),
    ('59075060', 'RUA APODI', 7),
    ('59075070', 'RUA 2', 8);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_CLIENTES(
	PK_CLI INT UNSIGNED NOT NULL AUTO_INCREMENT,
    CLI_LOGRADOURO VARCHAR(100),
    CLI_COMPLEMENTO VARCHAR(25),
    CLI_NUMERO VARCHAR(10),
    FK_CLI_CEP VARCHAR(8) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_CLI),
    CONSTRAINT FK_CEP_CLI FOREIGN KEY(FK_CLI_CEP) REFERENCES TB_CEPS(PK_CEP)
);

INSERT INTO TB_CLIENTES 
	(FK_CLI_CEP) 
VALUES
	('59075770'),
    ('59075020'),
    ('59075030'),
    ('59075040'),
    ('59075050'),
    ('68560000'),
    ('59075060'),
    ('59075070'),
    ('59075770');


USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_CLIENTES_PESSOAS_FISICAS(
    PK_PFC INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PFC_NOME VARCHAR(80) NOT NULL,
    PFC_CPF VARCHAR(11) NOT NULL,
    PFC_DATA_NASCIMENTO DATE,
    PFC_RG VARCHAR(15),
    FK_PFC_CLI INT UNSIGNED NOT NULL,
    FK_PFC_SEX TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_PFC),
    CONSTRAINT UNIQUE KEY (PFC_CPF),
    CONSTRAINT FK_CLI_PFC FOREIGN KEY(FK_PFC_CLI) REFERENCES TB_CLIENTES(PK_CLI),
    CONSTRAINT FK_SEX_PFC FOREIGN KEY(FK_PFC_SEX) REFERENCES TB_SEXOS(PK_SEX)
);

INSERT INTO TB_CLIENTES_PESSOAS_FISICAS
	(PFC_NOME, PFC_CPF, PFC_RG, PFC_DATA_NASCIMENTO, FK_PFC_SEX, FK_PFC_CLI) 
VALUES
	('CARLA AGUIAR FALCÃO', '93120567353', '1111111', 19820821, 2, 1),
    ('FABIANO FAUSTINO DE OLIVEIRA', '69628459287', '3858307', 19810424, 1, 1),
    ('CONCEIÇÃO AGUIAR', '2222222222', '2222222', 19590101, 2, 1),
    ('LUZINEIDA FAUSTINO DE OLIVEIRA', '33333333333', '3333333', 19550821, 2, 2),
    ('JOSÉ FAUSTINO DE OLIVEIRA', '44444444444', '4444444', 19540129, 1, 2);


USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_PESSOAS_FISICAS_ENDERECOS(
	FK_PFE_CLI INT UNSIGNED NOT NULL,
    FK_PFE_PFC INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_PFE_CLI, FK_PFE_PFC),
    CONSTRAINT FK_CLI_PFE FOREIGN KEY(FK_PFE_CLI) REFERENCES TB_CLIENTES(PK_CLI),
	CONSTRAINT FK_PFC_PFE FOREIGN KEY(FK_PFE_PFC) REFERENCES TB_CLIENTES_PESSOAS_FISICAS(PK_PFC)
);

INSERT INTO TB_PESSOAS_FISICAS_ENDERECOS 
	(FK_PFE_PFC, FK_PFE_CLI)
VALUES 
	(1,1),
    (2,1),
    (3,1),
    (4,6),
    (5,6);

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_CLIENTES_PESSOAS_JURIDICAS(
	PK_PJC INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PJC_RAZAO_SOCIAL VARCHAR(80) NOT NULL,
    PJC_CNPJ VARCHAR(14) NOT NULL,
    PJC_DATA_ABERTURA DATE,
    PJC_INSCRICAO_MUNICIPAL VARCHAR(15),
    PJC_INSCRICAO_ESTADIAL VARCHAR(15),
    FK_PJC_CLI INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_PJC),
    CONSTRAINT UNIQUE KEY (PJC_CNPJ),
    CONSTRAINT FK_CLI_PJC FOREIGN KEY(FK_PJC_CLI) REFERENCES TB_CLIENTES(PK_CLI)
);

INSERT INTO TB_CLIENTES_PESSOAS_JURIDICAS
	(PJC_RAZAO_SOCIAL, PJC_CNPJ, FK_PJC_CLI) 
VALUES
	('FALU MODAS', '11111111111111', 6),
    ('BQD PUBLICIDADES', '22222222222222', 6),
    ('LUCIANO ÁUDIOS E VÍDEOS', '33333333333333', 6);

 
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_PESSOAS_JURIDICAS_ENDERECOS(
	FK_PJE_CLI INT UNSIGNED NOT NULL,
    FK_PJE_PJC INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_PJE_CLI, FK_PJE_PJC),
    CONSTRAINT FK_CLI_PJE FOREIGN KEY(FK_PJE_CLI) REFERENCES TB_CLIENTES(PK_CLI),
	CONSTRAINT FK_PJC_PJE FOREIGN KEY(FK_PJE_PJC) REFERENCES TB_CLIENTES_PESSOAS_JURIDICAS(PK_PJC)
);

INSERT INTO TB_PESSOAS_JURIDICAS_ENDERECOS 
	(FK_PJE_PJC, FK_PJE_CLI)
VALUES 
	(1,6),
    (2,2),
    (3,5);

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_TIPOS_FONES(
	PK_TDF TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    TDF_NOME VARCHAR(25) NOT NULL,
	CONSTRAINT PRIMARY KEY(PK_TDF),
    CONSTRAINT UNIQUE KEY(TDF_NOME)
);

INSERT INTO TB_TIPOS_FONES 
	(TDF_NOME)
VALUES 
	('RESIDENCIAL'), 
	('CELULAR'),
    ('TRABALHO');

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FONE_PESSOAS_FISICAS(
	FK_FPF_PFC INT UNSIGNED NOT NULL,
    FPF_FONE VARCHAR(12) NOT NULL,
    FK_FPF_TDF TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FPF_PFC, FPF_FONE),
    CONSTRAINT FK_TDF_FPF FOREIGN KEY(FK_FPF_TDF) REFERENCES TB_TIPOS_FONES(PK_TDF),
    CONSTRAINT FK_PFC_FPF FOREIGN KEY(FK_FPF_PFC) REFERENCES TB_CLIENTES_PESSOAS_FISICAS(PK_PFC)
);

INSERT INTO TB_FONE_PESSOAS_FISICAS 
	(FK_FPF_PFC, FPF_FONE, FK_FPF_TDF) 
VALUES 
 	(1, '84999215689', 2), (1, '84991143397', 2),
    (2, '84991143397', 2),
    (3, '9434313434', 3), (3, '94991878569', 3),
    (4, '9434311698', 1), (4, '94991865941', 2),
    (5, '85999553635', 2);

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FONE_PESSOAS_JURIDICA(
	FK_FPJ_PJC INT UNSIGNED NOT NULL,
    FPJ_FONE VARCHAR(12) NOT NULL,
    FK_FPJ_TDF TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FPJ_PJC, FPJ_FONE),
	CONSTRAINT FK_TDF_FPJ FOREIGN KEY(FK_FPJ_TDF) REFERENCES TB_TIPOS_FONES(PK_TDF),
    CONSTRAINT FK_PJC_FPJ FOREIGN KEY(FK_FPJ_PJC) REFERENCES TB_CLIENTES_PESSOAS_JURIDICAS(PK_PJC)
);

INSERT INTO TB_FONE_PESSOAS_JURIDICA 
	(FK_FPJ_PJC, FPJ_FONE, FK_FPJ_TDF) 
VALUES 
	(1, '9434313434', 3), (1, '94991878569', 2),
    (2, '9434311698', 2), (2, '94991865941', 2),
    (3, '94991885773', 2);
   
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FORNECEDORES(
	PK_FOR INT UNSIGNED NOT NULL AUTO_INCREMENT,
    FOR_RAZAO_SOCIAL VARCHAR(25) NOT NULL,
    FOR_CNPJ VARCHAR(14) NOT NULL,
    FOR_LOGRADOURO VARCHAR(100),
    FOR_NUMERO VARCHAR(10),
    FOR_COMPLEMENTO VARCHAR(25),
    FOR_INSCRICAO_MUNICIPAL VARCHAR(14),
    FOR_INSCRICAO_ESTADUAL VARCHAR(14),
    FOR_WEBSITE VARCHAR(25),
    FK_FOR_CEP VARCHAR(8) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_FOR),
    CONSTRAINT UNIQUE KEY(FOR_CNPJ),
    CONSTRAINT FK_CEP_FOR FOREIGN KEY(FK_FOR_CEP) REFERENCES TB_CEPS(PK_CEP)
);

INSERT INTO TB_FORNECEDORES 
	(FOR_CNPJ, FOR_RAZAO_SOCIAL, FOR_LOGRADOURO, FOR_NUMERO, FOR_COMPLEMENTO, FK_FOR_CEP) 
VALUES 
	('11111111111111','TECNO TESTE', '', '', '', '59075020'),
    ('22222222222222','AGUA E GELO', '', '', '', '59075030'),
    ('33333333333333','MMTGAP NET', '', '', '', '59075040');
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FONE_FORNECEDORES(
	FK_FDF_FOR INT UNSIGNED NOT NULL,
    FDF_FONE VARCHAR(12) NOT NULL,
    FK_FDF_TDF TINYINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FDF_FOR, FDF_FONE),
	CONSTRAINT FK_TDF_FDF FOREIGN KEY(FK_FDF_TDF) REFERENCES TB_TIPOS_FONES(PK_TDF),
    CONSTRAINT FK_FOR_FDF FOREIGN KEY(FK_FDF_FOR) REFERENCES TB_FORNECEDORES(PK_FOR)
);

INSERT INTO TB_FONE_FORNECEDORES
	(FK_FDF_FOR, FDF_FONE, FK_FDF_TDF) 
VALUES 
	(1, '8411112222', 3),
    (2, '8422221111', 3),
    (3, '8433333333', 3);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_COMPRAS(
	PK_COM INT UNSIGNED NOT NULL AUTO_INCREMENT,
    COM_DATA DATE,
    COM_NF VARCHAR(25),
    COM_PRECO DECIMAL(8,2) NOT NULL,
    FK_COM_FOR INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_COM, FK_COM_FOR),
    CONSTRAINT FK_FOR_COM FOREIGN KEY(FK_COM_FOR) REFERENCES TB_FORNECEDORES(PK_FOR)
);

INSERT INTO TB_COMPRAS 
	(FK_COM_FOR, COM_DATA) 
VALUES 
	(1, 20151002),
    (1, 20160102),
    (2, 20170707),
    (3, 20180505);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_MARCAS(
	PK_MAR SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    MAR_NOME VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_MAR)
);

INSERT INTO TB_MARCAS 
	(MAR_NOME) 
VALUES 
	('MIKASA'),
    ('MIZUNO'),
    ('NIKE'),
    ('ADIDAS');
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_DEPARTAMENTOS(
	PK_DEP SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    DEP_NOME VARCHAR(25) NOT NULL,
    DEP_DESCONTO DECIMAL(3,2),
    CONSTRAINT PRIMARY KEY(PK_DEP)
);

-- ALTER TABLE TB_DEPARTAMENTOS
-- ADD COLUMN DEP_DESCONTO DOUBLE;

INSERT INTO TB_DEPARTAMENTOS 
	(DEP_NOME, DEP_DESCONTO) 
VALUES 
	('VÔLEI', 0.2),
    ('FUTEBOL', 0.15),
    ('ATLETISMO', 0.10),
    ('NATAÇÃO', 0.05);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_PRODUTOS(
	PK_PRO INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PRO_NOME VARCHAR(25) NOT NULL,
    PRO_PRECO DECIMAL(6,2) NOT NULL,
    PRO_DESCRICAO VARCHAR(200),
    PRO_QUANTIDADE_MINIMA SMALLINT UNSIGNED,
    PRO_QUANTIDADE_ESTOQUE SMALLINT UNSIGNED,
    FK_PRO_MAR SMALLINT UNSIGNED NOT NULL,
    FK_PRO_DEP SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_PRO),
    CONSTRAINT FK_MAR_PRO FOREIGN KEY(FK_PRO_MAR) REFERENCES TB_MARCAS(PK_MAR),
    CONSTRAINT FK_DEP_PRO FOREIGN KEY(FK_PRO_DEP) REFERENCES TB_DEPARTAMENTOS(PK_DEP)
);

-- ALTER TABLE TB_PRODUTOS
-- MODIFY COLUMN PRO_DESCRICAO VARCHAR(200);

INSERT INTO TB_PRODUTOS 
	(PRO_NOME, PRO_DESCRICAO, PRO_PRECO, PRO_QUANTIDADE_MINIMA, PRO_QUANTIDADE_ESTOQUE, FK_PRO_MAR, FK_PRO_DEP) 
VALUES 
	('BOLA DE VÔLEI', 'BOLA OFICIAL CBV', 300.00, 10, 100, 1, 1),
    ('TÊNIS', 'AMORTECIMENTO EM GEL', 250.00, 10, 50, 2, 2),
    ('CAMISA DRYFIT', 'TECNOLOGIA ANTI SUOR', 49.90, 5, 25, 3, 3),
    ('BERMUDA', 'BAIXA RESISTÊNCIA NA ÁGUA', 69.90, 5, 20, 3, 4);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_ITENS_COMPRAS(
	FK_IDC_PRO INT UNSIGNED NOT NULL,
    FK_IDC_COM INT UNSIGNED NOT NULL,
    IDC_PRECO DECIMAL(6,2) NOT NULL,
    IDC_QUANTIDADE INT,
    CONSTRAINT PRIMARY KEY(FK_IDC_PRO, FK_IDC_COM),
    CONSTRAINT FK_PRO_IDC FOREIGN KEY(FK_IDC_PRO) REFERENCES TB_PRODUTOS(PK_PRO),
    CONSTRAINT FK_COM_IDC FOREIGN KEY(FK_IDC_COM) REFERENCES TB_COMPRAS(PK_COM)
);

INSERT INTO TB_ITENS_COMPRAS 
	(FK_IDC_COM, FK_IDC_PRO, IDC_PRECO) 
VALUES 
	(1, 1, 100.00),
    (1, 2, 50.00),
    (1, 3, 25.00),
    (2, 1, 80.00),
    (2, 3, 15.00),
    (3, 1, 110.00),
    (3, 2, 55.00),
    (3, 4, 20.00);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_VENDEDORES(
	PK_VEN SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    VEN_NOME VARCHAR(80) NOT NULL,
    VEN_CPF VARCHAR(11) NOT NULL,
    VEN_MATRICULA INT(10) ZEROFILL NOT NULL ,
    VEN_LOGRADOURO VARCHAR(100),
    VEN_NUMERO VARCHAR(10),
    VEN_COMPLEMENTO VARCHAR(25),
    VEN_DATA_ADMISSAO DATE NOT NULL,
    VEN_DATA_DEMISSAO DATE,
    FK_VEN_SEX TINYINT UNSIGNED NOT NULL,
    FK_VEN_SUP SMALLINT UNSIGNED,
    FK_VEN_CEP VARCHAR(8) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_VEN),
    CONSTRAINT UNIQUE KEY(VEN_CPF, VEN_MATRICULA),
    CONSTRAINT FK_SEX_VEN FOREIGN KEY(FK_VEN_SEX) REFERENCES TB_SEXOS(PK_SEX),
	CONSTRAINT FK_CEP_VEN FOREIGN KEY(FK_VEN_CEP) REFERENCES TB_CEPS(PK_CEP)
);

-- ALTER TABLE TB_VENDEDORES
-- ADD COLUMN VEN_MATRICULA VARCHAR(10);
-- ALTER TABLE TB_VENDEDORES
-- ADD COLUMN FK_VEN_SEX TINYINT UNSIGNED NOT NULL;

INSERT INTO TB_VENDEDORES
	(VEN_NOME, VEN_CPF, VEN_MATRICULA, VEN_NUMERO, VEN_DATA_ADMISSAO, FK_VEN_SUP, FK_VEN_SEX, FK_VEN_CEP) 
VALUES 
	('JOAOZINHO 30', '01010101010', '10', '11', 20061201, 2, 1, '59075040'),
    ('TEREZINHA DE JESUS', '02020202020', '20', '22', 20070102, '', 2, '59075040'),
    ('ANA JÚLIA', '03030303030', '30', '33', 20091001, 2, 2, '59075040'),
    ('LÉO BATISTA', '04040404040','40', '44', 20101215, 3, 1, '59075050'),
    ('MARIA DE JEUS SANTOS', '05050505050', '50', '55', 20121212, 2, 2, '59075060');
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FONE_VENDEDORES(
	FK_FDV_VEN SMALLINT UNSIGNED NOT NULL,
    FDV_FONE VARCHAR(12) NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_FDV_VEN, FDV_FONE),
    CONSTRAINT FK_VEN_FDV FOREIGN KEY(FK_FDV_VEN) REFERENCES TB_VENDEDORES(PK_VEN)
);

INSERT INTO TB_FONE_VENDEDORES 
	(FK_FDV_VEN, FDV_FONE) 
VALUES 
	(1, '8412345678'),
    (2, '8487654321'),
    (3, '8412121212'),
    (4, '8421212121'),
    (5, '8433333333');

USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_VENDAS(
	PK_VDS INT UNSIGNED NOT NULL AUTO_INCREMENT,
    VDS_DATA DATE NOT NULL,
    VDS_NF VARCHAR(25) NOT NULL,
    VDS_PRECO DECIMAL(8,2),
    FK_VDS_CLI INT UNSIGNED NOT NULL,
    FK_VDS_VEN SMALLINT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_VDS),
    CONSTRAINT FK_CLI_VDS FOREIGN KEY(FK_VDS_CLI) REFERENCES TB_CLIENTES(PK_CLI),
    CONSTRAINT FK_VEN_VDS FOREIGN KEY(FK_VDS_VEN) REFERENCES TB_VENDEDORES(PK_VEN)
);

INSERT INTO TB_VENDAS 
	(FK_VDS_CLI, FK_VDS_VEN, VDS_DATA, VDS_NF) 
VALUES 
	(1, 2, 20171001, '456'),
    (2, 3, 20170501, '654'),
    (2, 4, 20180501, '885'),
    (1, 1, 20180801, '123');

-- ALTER TABLE TB_VENDAS
-- ADD COLUMN VDS_NF VARCHAR(25) NOT NULL;
	/*(1, 2, 20171001, 1000.00),
    (2, 3, 20170501, 1500.00),
    (3, 4, 20180501, 100.00),
    (1, 1, 20180801, 2000.00);*/
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_ITENS_VENDAS(
	FK_IDV_PRO INT UNSIGNED NOT NULL,
    FK_IDV_VDS INT UNSIGNED NOT NULL,
    IDV_PRECO DECIMAL(6,2) NOT NULL,
    IDV_QUANTIDADE INT UNSIGNED,
    CONSTRAINT PRIMARY KEY(FK_IDV_PRO, FK_IDV_VDS),
    CONSTRAINT FK_PRO_IDV FOREIGN KEY(FK_IDV_PRO) REFERENCES TB_PRODUTOS(PK_PRO),
	CONSTRAINT FK_VDS_IDV FOREIGN KEY(FK_IDV_VDS) REFERENCES TB_VENDAS(PK_VDS)
);

INSERT INTO TB_ITENS_VENDAS 
	(FK_IDV_VDS, FK_IDV_PRO, IDV_PRECO) 
VALUES 
	(1, 1, 300.00),
    (1, 2, 200.00),
    (1, 3, 100.00),
    (1, 4, 150.00),
    (2, 1, 100.00),
    (2, 2, 260.00),
    (2, 4, 140.00);
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_FORMAS_PAGAMENTOS(
	PK_FDP INT UNSIGNED NOT NULL AUTO_INCREMENT,
    FDP_FORMA VARCHAR(25) NOT NULL,
    CONSTRAINT PRIMARY KEY(PK_FDP)
);

INSERT INTO TB_FORMAS_PAGAMENTOS 
	(FDP_FORMA) 
VALUES 
	('DINHEIRO'),
    ('CARTÃO DE CRÉDITO'),
    ('CARTÃO DE DÉBITO'),
    ('CHEQUE');
    
USE DB_LOJA;

CREATE TABLE IF NOT EXISTS TB_PAGAMENTOS_VENDAS(
	FK_PDV_FDP INT UNSIGNED NOT NULL,
    FK_PDV_VDS INT UNSIGNED NOT NULL,
    CONSTRAINT PRIMARY KEY(FK_PDV_FDP, FK_PDV_VDS),
    CONSTRAINT FK_FDP_PDV FOREIGN KEY(FK_PDV_FDP) REFERENCES TB_FORMAS_PAGAMENTOS(PK_FDP),
    CONSTRAINT FK_VDS_PDV FOREIGN KEY(FK_PDV_VDS) REFERENCES TB_VENDAS(PK_VDS)
);

INSERT INTO TB_PAGAMENTOS_VENDAS
	(FK_PDV_VDS, FK_PDV_FDP)
VALUES
	(1,2),
    (2,3);